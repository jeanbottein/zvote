// THIS FILE IS AUTOMATICALLY GENERATED BY SPACETIMEDB. EDITS TO THIS FILE
// WILL NOT BE SAVED. MODIFY TABLES IN YOUR MODULE SOURCE CODE INSTEAD.

// This was generated using spacetimedb cli version 1.3.2 (commit 4b41cf3d71aa85cd4e75c96cbb54324481ee0b27).

/* eslint-disable */
/* tslint:disable */
// @ts-nocheck
import {
  AlgebraicType,
  AlgebraicValue,
  BinaryReader,
  BinaryWriter,
  ConnectionId,
  DbConnectionBuilder,
  DbConnectionImpl,
  Identity,
  ProductType,
  ProductTypeElement,
  SubscriptionBuilderImpl,
  SumType,
  SumTypeVariant,
  TableCache,
  TimeDuration,
  Timestamp,
  deepEqual,
  type CallReducerFlags,
  type DbContext,
  type ErrorContextInterface,
  type Event,
  type EventContextInterface,
  type ReducerEventContextInterface,
  type SubscriptionEventContextInterface,
} from "@clockworklabs/spacetimedb-sdk";

// Import and reexport all reducer arg types
import { Approve } from "./approve_reducer.ts";
export { Approve };
import { CastJudgment } from "./cast_judgment_reducer.ts";
export { CastJudgment };
import { CreateVote } from "./create_vote_reducer.ts";
export { CreateVote };
import { DeleteVote } from "./delete_vote_reducer.ts";
export { DeleteVote };
import { EnsureServerInfo } from "./ensure_server_info_reducer.ts";
export { EnsureServerInfo };
import { GrantAccessByToken } from "./grant_access_by_token_reducer.ts";
export { GrantAccessByToken };
import { SetApprovals } from "./set_approvals_reducer.ts";
export { SetApprovals };
import { Unapprove } from "./unapprove_reducer.ts";
export { Unapprove };
import { WithdrawJudgments } from "./withdraw_judgments_reducer.ts";
export { WithdrawJudgments };

// Import and reexport all table handle types
import { ApprovalTableHandle } from "./approval_table.ts";
export { ApprovalTableHandle };
import { JudgmentTableHandle } from "./judgment_table.ts";
export { JudgmentTableHandle };
import { MjSummaryTableHandle } from "./mj_summary_table.ts";
export { MjSummaryTableHandle };
import { ServerInfoTableHandle } from "./server_info_table.ts";
export { ServerInfoTableHandle };
import { VoteTableHandle } from "./vote_table.ts";
export { VoteTableHandle };
import { VoteAccessTableHandle } from "./vote_access_table.ts";
export { VoteAccessTableHandle };
import { VoteOptionTableHandle } from "./vote_option_table.ts";
export { VoteOptionTableHandle };

// Import and reexport all types
import { Approval } from "./approval_type.ts";
export { Approval };
import { Judgment } from "./judgment_type.ts";
export { Judgment };
import { Mention } from "./mention_type.ts";
export { Mention };
import { MjSummary } from "./mj_summary_type.ts";
export { MjSummary };
import { ServerInfo } from "./server_info_type.ts";
export { ServerInfo };
import { Visibility } from "./visibility_type.ts";
export { Visibility };
import { Vote } from "./vote_type.ts";
export { Vote };
import { VoteAccess } from "./vote_access_type.ts";
export { VoteAccess };
import { VoteOption } from "./vote_option_type.ts";
export { VoteOption };
import { VotingSystem } from "./voting_system_type.ts";
export { VotingSystem };

const REMOTE_MODULE = {
  tables: {
    approval: {
      tableName: "approval",
      rowType: Approval.getTypeScriptAlgebraicType(),
    },
    judgment: {
      tableName: "judgment",
      rowType: Judgment.getTypeScriptAlgebraicType(),
      primaryKey: "id",
      primaryKeyInfo: {
        colName: "id",
        colType: Judgment.getTypeScriptAlgebraicType().product.elements[0].algebraicType,
      },
    },
    mj_summary: {
      tableName: "mj_summary",
      rowType: MjSummary.getTypeScriptAlgebraicType(),
      primaryKey: "optionId",
      primaryKeyInfo: {
        colName: "optionId",
        colType: MjSummary.getTypeScriptAlgebraicType().product.elements[0].algebraicType,
      },
    },
    server_info: {
      tableName: "server_info",
      rowType: ServerInfo.getTypeScriptAlgebraicType(),
      primaryKey: "id",
      primaryKeyInfo: {
        colName: "id",
        colType: ServerInfo.getTypeScriptAlgebraicType().product.elements[0].algebraicType,
      },
    },
    vote: {
      tableName: "vote",
      rowType: Vote.getTypeScriptAlgebraicType(),
      primaryKey: "id",
      primaryKeyInfo: {
        colName: "id",
        colType: Vote.getTypeScriptAlgebraicType().product.elements[0].algebraicType,
      },
    },
    vote_access: {
      tableName: "vote_access",
      rowType: VoteAccess.getTypeScriptAlgebraicType(),
      primaryKey: "id",
      primaryKeyInfo: {
        colName: "id",
        colType: VoteAccess.getTypeScriptAlgebraicType().product.elements[0].algebraicType,
      },
    },
    vote_option: {
      tableName: "vote_option",
      rowType: VoteOption.getTypeScriptAlgebraicType(),
      primaryKey: "id",
      primaryKeyInfo: {
        colName: "id",
        colType: VoteOption.getTypeScriptAlgebraicType().product.elements[0].algebraicType,
      },
    },
  },
  reducers: {
    approve: {
      reducerName: "approve",
      argsType: Approve.getTypeScriptAlgebraicType(),
    },
    cast_judgment: {
      reducerName: "cast_judgment",
      argsType: CastJudgment.getTypeScriptAlgebraicType(),
    },
    create_vote: {
      reducerName: "create_vote",
      argsType: CreateVote.getTypeScriptAlgebraicType(),
    },
    delete_vote: {
      reducerName: "delete_vote",
      argsType: DeleteVote.getTypeScriptAlgebraicType(),
    },
    ensure_server_info: {
      reducerName: "ensure_server_info",
      argsType: EnsureServerInfo.getTypeScriptAlgebraicType(),
    },
    grant_access_by_token: {
      reducerName: "grant_access_by_token",
      argsType: GrantAccessByToken.getTypeScriptAlgebraicType(),
    },
    set_approvals: {
      reducerName: "set_approvals",
      argsType: SetApprovals.getTypeScriptAlgebraicType(),
    },
    unapprove: {
      reducerName: "unapprove",
      argsType: Unapprove.getTypeScriptAlgebraicType(),
    },
    withdraw_judgments: {
      reducerName: "withdraw_judgments",
      argsType: WithdrawJudgments.getTypeScriptAlgebraicType(),
    },
  },
  versionInfo: {
    cliVersion: "1.3.2",
  },
  // Constructors which are used by the DbConnectionImpl to
  // extract type information from the generated RemoteModule.
  //
  // NOTE: This is not strictly necessary for `eventContextConstructor` because
  // all we do is build a TypeScript object which we could have done inside the
  // SDK, but if in the future we wanted to create a class this would be
  // necessary because classes have methods, so we'll keep it.
  eventContextConstructor: (imp: DbConnectionImpl, event: Event<Reducer>) => {
    return {
      ...(imp as DbConnection),
      event
    }
  },
  dbViewConstructor: (imp: DbConnectionImpl) => {
    return new RemoteTables(imp);
  },
  reducersConstructor: (imp: DbConnectionImpl, setReducerFlags: SetReducerFlags) => {
    return new RemoteReducers(imp, setReducerFlags);
  },
  setReducerFlagsConstructor: () => {
    return new SetReducerFlags();
  }
}

// A type representing all the possible variants of a reducer.
export type Reducer = never
| { name: "Approve", args: Approve }
| { name: "CastJudgment", args: CastJudgment }
| { name: "CreateVote", args: CreateVote }
| { name: "DeleteVote", args: DeleteVote }
| { name: "EnsureServerInfo", args: EnsureServerInfo }
| { name: "GrantAccessByToken", args: GrantAccessByToken }
| { name: "SetApprovals", args: SetApprovals }
| { name: "Unapprove", args: Unapprove }
| { name: "WithdrawJudgments", args: WithdrawJudgments }
;

export class RemoteReducers {
  constructor(private connection: DbConnectionImpl, private setCallReducerFlags: SetReducerFlags) {}

  approve(voteId: number, optionId: number) {
    const __args = { voteId, optionId };
    let __writer = new BinaryWriter(1024);
    Approve.getTypeScriptAlgebraicType().serialize(__writer, __args);
    let __argsBuffer = __writer.getBuffer();
    this.connection.callReducer("approve", __argsBuffer, this.setCallReducerFlags.approveFlags);
  }

  onApprove(callback: (ctx: ReducerEventContext, voteId: number, optionId: number) => void) {
    this.connection.onReducer("approve", callback);
  }

  removeOnApprove(callback: (ctx: ReducerEventContext, voteId: number, optionId: number) => void) {
    this.connection.offReducer("approve", callback);
  }

  castJudgment(optionId: number, mention: Mention) {
    const __args = { optionId, mention };
    let __writer = new BinaryWriter(1024);
    CastJudgment.getTypeScriptAlgebraicType().serialize(__writer, __args);
    let __argsBuffer = __writer.getBuffer();
    this.connection.callReducer("cast_judgment", __argsBuffer, this.setCallReducerFlags.castJudgmentFlags);
  }

  onCastJudgment(callback: (ctx: ReducerEventContext, optionId: number, mention: Mention) => void) {
    this.connection.onReducer("cast_judgment", callback);
  }

  removeOnCastJudgment(callback: (ctx: ReducerEventContext, optionId: number, mention: Mention) => void) {
    this.connection.offReducer("cast_judgment", callback);
  }

  createVote(title: string, options: string[], visibility: Visibility | undefined, votingSystem: VotingSystem | undefined) {
    const __args = { title, options, visibility, votingSystem };
    let __writer = new BinaryWriter(1024);
    CreateVote.getTypeScriptAlgebraicType().serialize(__writer, __args);
    let __argsBuffer = __writer.getBuffer();
    this.connection.callReducer("create_vote", __argsBuffer, this.setCallReducerFlags.createVoteFlags);
  }

  onCreateVote(callback: (ctx: ReducerEventContext, title: string, options: string[], visibility: Visibility | undefined, votingSystem: VotingSystem | undefined) => void) {
    this.connection.onReducer("create_vote", callback);
  }

  removeOnCreateVote(callback: (ctx: ReducerEventContext, title: string, options: string[], visibility: Visibility | undefined, votingSystem: VotingSystem | undefined) => void) {
    this.connection.offReducer("create_vote", callback);
  }

  deleteVote(voteId: number) {
    const __args = { voteId };
    let __writer = new BinaryWriter(1024);
    DeleteVote.getTypeScriptAlgebraicType().serialize(__writer, __args);
    let __argsBuffer = __writer.getBuffer();
    this.connection.callReducer("delete_vote", __argsBuffer, this.setCallReducerFlags.deleteVoteFlags);
  }

  onDeleteVote(callback: (ctx: ReducerEventContext, voteId: number) => void) {
    this.connection.onReducer("delete_vote", callback);
  }

  removeOnDeleteVote(callback: (ctx: ReducerEventContext, voteId: number) => void) {
    this.connection.offReducer("delete_vote", callback);
  }

  ensureServerInfo() {
    this.connection.callReducer("ensure_server_info", new Uint8Array(0), this.setCallReducerFlags.ensureServerInfoFlags);
  }

  onEnsureServerInfo(callback: (ctx: ReducerEventContext) => void) {
    this.connection.onReducer("ensure_server_info", callback);
  }

  removeOnEnsureServerInfo(callback: (ctx: ReducerEventContext) => void) {
    this.connection.offReducer("ensure_server_info", callback);
  }

  grantAccessByToken(token: string) {
    const __args = { token };
    let __writer = new BinaryWriter(1024);
    GrantAccessByToken.getTypeScriptAlgebraicType().serialize(__writer, __args);
    let __argsBuffer = __writer.getBuffer();
    this.connection.callReducer("grant_access_by_token", __argsBuffer, this.setCallReducerFlags.grantAccessByTokenFlags);
  }

  onGrantAccessByToken(callback: (ctx: ReducerEventContext, token: string) => void) {
    this.connection.onReducer("grant_access_by_token", callback);
  }

  removeOnGrantAccessByToken(callback: (ctx: ReducerEventContext, token: string) => void) {
    this.connection.offReducer("grant_access_by_token", callback);
  }

  setApprovals(voteId: number, optionIds: number[]) {
    const __args = { voteId, optionIds };
    let __writer = new BinaryWriter(1024);
    SetApprovals.getTypeScriptAlgebraicType().serialize(__writer, __args);
    let __argsBuffer = __writer.getBuffer();
    this.connection.callReducer("set_approvals", __argsBuffer, this.setCallReducerFlags.setApprovalsFlags);
  }

  onSetApprovals(callback: (ctx: ReducerEventContext, voteId: number, optionIds: number[]) => void) {
    this.connection.onReducer("set_approvals", callback);
  }

  removeOnSetApprovals(callback: (ctx: ReducerEventContext, voteId: number, optionIds: number[]) => void) {
    this.connection.offReducer("set_approvals", callback);
  }

  unapprove(voteId: number, optionId: number) {
    const __args = { voteId, optionId };
    let __writer = new BinaryWriter(1024);
    Unapprove.getTypeScriptAlgebraicType().serialize(__writer, __args);
    let __argsBuffer = __writer.getBuffer();
    this.connection.callReducer("unapprove", __argsBuffer, this.setCallReducerFlags.unapproveFlags);
  }

  onUnapprove(callback: (ctx: ReducerEventContext, voteId: number, optionId: number) => void) {
    this.connection.onReducer("unapprove", callback);
  }

  removeOnUnapprove(callback: (ctx: ReducerEventContext, voteId: number, optionId: number) => void) {
    this.connection.offReducer("unapprove", callback);
  }

  withdrawJudgments(voteId: number) {
    const __args = { voteId };
    let __writer = new BinaryWriter(1024);
    WithdrawJudgments.getTypeScriptAlgebraicType().serialize(__writer, __args);
    let __argsBuffer = __writer.getBuffer();
    this.connection.callReducer("withdraw_judgments", __argsBuffer, this.setCallReducerFlags.withdrawJudgmentsFlags);
  }

  onWithdrawJudgments(callback: (ctx: ReducerEventContext, voteId: number) => void) {
    this.connection.onReducer("withdraw_judgments", callback);
  }

  removeOnWithdrawJudgments(callback: (ctx: ReducerEventContext, voteId: number) => void) {
    this.connection.offReducer("withdraw_judgments", callback);
  }

}

export class SetReducerFlags {
  approveFlags: CallReducerFlags = 'FullUpdate';
  approve(flags: CallReducerFlags) {
    this.approveFlags = flags;
  }

  castJudgmentFlags: CallReducerFlags = 'FullUpdate';
  castJudgment(flags: CallReducerFlags) {
    this.castJudgmentFlags = flags;
  }

  createVoteFlags: CallReducerFlags = 'FullUpdate';
  createVote(flags: CallReducerFlags) {
    this.createVoteFlags = flags;
  }

  deleteVoteFlags: CallReducerFlags = 'FullUpdate';
  deleteVote(flags: CallReducerFlags) {
    this.deleteVoteFlags = flags;
  }

  ensureServerInfoFlags: CallReducerFlags = 'FullUpdate';
  ensureServerInfo(flags: CallReducerFlags) {
    this.ensureServerInfoFlags = flags;
  }

  grantAccessByTokenFlags: CallReducerFlags = 'FullUpdate';
  grantAccessByToken(flags: CallReducerFlags) {
    this.grantAccessByTokenFlags = flags;
  }

  setApprovalsFlags: CallReducerFlags = 'FullUpdate';
  setApprovals(flags: CallReducerFlags) {
    this.setApprovalsFlags = flags;
  }

  unapproveFlags: CallReducerFlags = 'FullUpdate';
  unapprove(flags: CallReducerFlags) {
    this.unapproveFlags = flags;
  }

  withdrawJudgmentsFlags: CallReducerFlags = 'FullUpdate';
  withdrawJudgments(flags: CallReducerFlags) {
    this.withdrawJudgmentsFlags = flags;
  }

}

export class RemoteTables {
  constructor(private connection: DbConnectionImpl) {}

  get approval(): ApprovalTableHandle {
    return new ApprovalTableHandle(this.connection.clientCache.getOrCreateTable<Approval>(REMOTE_MODULE.tables.approval));
  }

  get judgment(): JudgmentTableHandle {
    return new JudgmentTableHandle(this.connection.clientCache.getOrCreateTable<Judgment>(REMOTE_MODULE.tables.judgment));
  }

  get mjSummary(): MjSummaryTableHandle {
    return new MjSummaryTableHandle(this.connection.clientCache.getOrCreateTable<MjSummary>(REMOTE_MODULE.tables.mj_summary));
  }

  get serverInfo(): ServerInfoTableHandle {
    return new ServerInfoTableHandle(this.connection.clientCache.getOrCreateTable<ServerInfo>(REMOTE_MODULE.tables.server_info));
  }

  get vote(): VoteTableHandle {
    return new VoteTableHandle(this.connection.clientCache.getOrCreateTable<Vote>(REMOTE_MODULE.tables.vote));
  }

  get voteAccess(): VoteAccessTableHandle {
    return new VoteAccessTableHandle(this.connection.clientCache.getOrCreateTable<VoteAccess>(REMOTE_MODULE.tables.vote_access));
  }

  get voteOption(): VoteOptionTableHandle {
    return new VoteOptionTableHandle(this.connection.clientCache.getOrCreateTable<VoteOption>(REMOTE_MODULE.tables.vote_option));
  }
}

export class SubscriptionBuilder extends SubscriptionBuilderImpl<RemoteTables, RemoteReducers, SetReducerFlags> { }

export class DbConnection extends DbConnectionImpl<RemoteTables, RemoteReducers, SetReducerFlags> {
  static builder = (): DbConnectionBuilder<DbConnection, ErrorContext, SubscriptionEventContext> => {
    return new DbConnectionBuilder<DbConnection, ErrorContext, SubscriptionEventContext>(REMOTE_MODULE, (imp: DbConnectionImpl) => imp as DbConnection);
  }
  subscriptionBuilder = (): SubscriptionBuilder => {
    return new SubscriptionBuilder(this);
  }
}

export type EventContext = EventContextInterface<RemoteTables, RemoteReducers, SetReducerFlags, Reducer>;
export type ReducerEventContext = ReducerEventContextInterface<RemoteTables, RemoteReducers, SetReducerFlags, Reducer>;
export type SubscriptionEventContext = SubscriptionEventContextInterface<RemoteTables, RemoteReducers, SetReducerFlags>;
export type ErrorContext = ErrorContextInterface<RemoteTables, RemoteReducers, SetReducerFlags>;
